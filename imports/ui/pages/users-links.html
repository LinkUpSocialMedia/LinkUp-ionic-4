<template name="Users_links">
  <div id="users-links" class="page">
    {{#if linksExist}}
      {{#each link in links}}
        {{> Link_card link=link}}

        <div id="{{link._id}}" class="item link-user-list {{showList}}">
          {{#each user in eventUsers}}
            {{> Mini_user_card user=user}}
          {{/each}}
        </div>
      {{/each}}
    {{else}}
      <div class="no-links">
        <h2>No links yet!</h2>
        <p>Go to the <a href="/">list</a> or <a href="/map">map</a> to join some! Or <a class="js-add-event-link" href="/add-event">make your own</a> event!</p>
      </div>
    {{/if}}
  </div>

  <div class="{{showForm}}" id="mini-profile">
    {{#let miniUser=miniUser}}
      <div class="{{showForm}}" id="mini-profile-content">
        <i class="ion-ios-close-empty js-close-form"></i>
        <div class="user-mini-profile">
          <div id="profile-header">
            {{#if noUserBackground}}
              <div id="temp-background"></div>
            {{else}}
              <img id="background-cover" src="{{miniUser.background}}">
            {{/if}}
            <div id="user-small">
              <img id="user-avatar" src="{{miniUser.avatar}}">
              <h2 class="{{noUserBackground}}">{{miniUser.name}}</h2>
            </div>
          </div>
          <div id="profile-info" class="list">
            <div class="item item-icon-left">
              <i class="icon ion-ios-people-outline"></i>
              <span class="name">Connections</span>
              <span class="item-note">{{miniUser.connections.length}}</span>
            </div>
            <div class="item item-icon-left">
              <i class="icon ion-ios-compose-outline"></i>
              <span class="name">Created</span>
              <span class="item-note">{{miniUser.created.length}}</span>
            </div>
            <div class="item item-icon-left">
              <svg version="1.1" id="Layer_1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" x="0px" y="0px"
                 width="50px" height="50px" viewBox="0 0 50 50" enable-background="new 0 0 50 50" xml:space="preserve">
                 <g>
                 	<path fill="#999999" d="M28.824,15.943c-2.731,1.038-3.437,3.845-3.437,3.845c0.783,1.641-0.633,2.938-2.303,4.451
                 		c-1.408,1.387-4.538,4.532-4.538,4.532c-1.387,1.393-2.785,2.77-4.172,4.178c-1.513,1.671-2.987,2.432-4.451,2.303l-0.007,0.007
                 		c-1.346-0.128-2.681-1-4.029-2.608c-1.297-1.543-1.343-3.803-0.072-5.36c0.204-0.249,11.369-11.415,11.619-11.618
                 		c1.021-0.834,2.342-1.101,3.568-0.819c0.955-1.227,1.656-2.475,3.585-3.579c-1.694-1.159-3.786-1.168-5.6-0.959
                 		c-1.862,0.213-3.491,0.955-4.836,2.24c-1.667,1.593-4.856,4.788-5.755,5.699c-0.912,0.899-4.106,4.086-5.699,5.754
                 		c-1.285,1.347-2.026,2.977-2.24,4.838c-0.388,3.385,1.025,5.955,3.425,8.231c3.76,3.563,9.11,3.636,12.761-0.022
                 		c1.755-1.762,3.505-3.527,5.249-5.306c0.393-0.385,0.783-0.771,1.173-1.157c-0.005-0.005-0.007-0.01-0.012-0.015
                 		c1.376-1.359,2.753-2.72,4.123-4.086c0.284-0.284,0.547-0.577,0.783-0.882c0.005,0.007,0.01,0.014,0.016,0.019
                 		C30.26,22.745,30.512,19.072,28.824,15.943z"/>
                 	<path fill="#999999" d="M46.884,23.543c-1.762-1.756-8.155-8.131-8.157-8.126c-0.804-0.81-1.607-1.62-2.414-2.427
                 		c-1.059-1.062-2.26-1.808-3.521-2.247c0-0.002,0-0.005,0-0.007c-0.705-0.245-2.206-0.446-2.229-0.449
                 		c-0.07-0.005-0.746-0.017-0.766-0.017c-0.96,0.024-1.923,0.206-2.855,0.553l0.008,0.007c-1.198,0.445-2.348,1.158-3.378,2.135
                 		c-2.397,2.276-3.811,4.848-3.423,8.232c0.133,1.148,0.778,2.443,1.316,3.403c0.298-0.3,2.855-2.851,3.493-3.485
                 		c-0.657-1.091-0.213-2.732,0.621-3.727c1.72-2.05,3.422-2.909,5.146-2.542c0.041-0.012,0.338,0.095,0.338,0.095
                 		c0.99,0.308,1.988,1.018,3.002,2.14c1.388,1.409,4.535,4.538,4.535,4.538c1.391,1.387,2.768,2.786,4.176,4.17
                 		c1.123,1.016,1.834,2.014,2.142,3.003l0.026,0.028c0.558,1.838-0.274,3.645-2.457,5.477c-1.543,1.297-3.803,1.344-5.361,0.074
                 		c-0.249-0.204-7.639-7.794-8.3-8.451c-0.751,0.748-1.367,1.361-1.74,1.729c-0.325,0.332-0.849,0.855-1.489,1.5
                 		c0.948,0.949,2.094,2.246,2.492,2.642c0.898,0.912,4.087,4.106,5.755,5.696c1.347,1.287,2.974,2.029,4.837,2.242
                 		c3.385,0.389,5.955-1.023,8.232-3.427C50.475,32.544,50.545,27.193,46.884,23.543z"/>
                 </g>
              </svg>
              <span class="name">Links</span>
              <span class="item-note">{{miniUser.events.length}}</span>
            </div>
          </div>
          <div class="bar bar-footer">
            <button class="button button-balanced js-message">Send {{miniUser.name}} a message</button>
          </div>
        </div>
      </div>
    {{/let}}
  </div>
</template>

<template name="Mini_user_card">
  <span class="js-mini-profile">
    <h4><img src="{{user.avatar}}"> <span>{{user.name}}</span></h4>
  </span>
</template>
